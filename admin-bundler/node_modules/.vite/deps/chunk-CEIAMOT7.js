import {
  DescendingSorting,
  DropdownMenu,
  IconButton,
  useTranslation
} from "./chunk-ZUPX4YFG.js";
import {
  useSearchParams
} from "./chunk-HTGWU6KF.js";
import {
  require_jsx_runtime
} from "./chunk-P6CFP5BP.js";
import {
  __toESM,
  require_react
} from "./chunk-H5NG3XTT.js";

// node_modules/@medusajs/dashboard/dist/chunk-RKBIB2RM.mjs
var import_react = __toESM(require_react(), 1);
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var initState = (params, prefix) => {
  const param = prefix ? `${prefix}_order` : "order";
  const sortParam = params.get(param);
  if (!sortParam) {
    return {
      dir: "asc"
      /* ASC */
    };
  }
  const dir = sortParam.startsWith("-") ? "desc" : "asc";
  const key = sortParam.replace("-", "");
  return {
    key,
    dir
  };
};
var formatKey = (key) => {
  const words = key.split("_");
  const formattedWords = words.map((word, index) => {
    if (index === 0) {
      return word.charAt(0).toUpperCase() + word.slice(1);
    } else {
      return word;
    }
  });
  return formattedWords.join(" ");
};
var DataTableOrderBy = ({
  keys,
  prefix
}) => {
  const [searchParams, setSearchParams] = useSearchParams();
  const [state, setState] = (0, import_react.useState)(initState(searchParams, prefix));
  const param = prefix ? `${prefix}_order` : "order";
  const { t } = useTranslation();
  const handleDirChange = (dir) => {
    setState((prev) => ({
      ...prev,
      dir
    }));
    updateOrderParam({
      key: state.key,
      dir
    });
  };
  const handleKeyChange = (value) => {
    setState((prev) => ({
      ...prev,
      key: value
    }));
    updateOrderParam({
      key: value,
      dir: state.dir
    });
  };
  const updateOrderParam = (state2) => {
    if (!state2.key) {
      setSearchParams((prev) => {
        prev.delete(param);
        return prev;
      });
      return;
    }
    const orderParam = state2.dir === "asc" ? state2.key : `-${state2.key}`;
    setSearchParams((prev) => {
      prev.set(param, orderParam);
      return prev;
    });
  };
  return (0, import_jsx_runtime.jsxs)(DropdownMenu, { children: [
    (0, import_jsx_runtime.jsx)(DropdownMenu.Trigger, { asChild: true, children: (0, import_jsx_runtime.jsx)(IconButton, { size: "small", children: (0, import_jsx_runtime.jsx)(DescendingSorting, {}) }) }),
    (0, import_jsx_runtime.jsxs)(DropdownMenu.Content, { className: "z-[1]", align: "end", children: [
      (0, import_jsx_runtime.jsx)(
        DropdownMenu.RadioGroup,
        {
          value: state.key,
          onValueChange: handleKeyChange,
          children: keys.map((key) => {
            const stringKey = String(key);
            return (0, import_jsx_runtime.jsx)(
              DropdownMenu.RadioItem,
              {
                value: stringKey,
                onSelect: (event) => event.preventDefault(),
                children: formatKey(stringKey)
              },
              stringKey
            );
          })
        }
      ),
      (0, import_jsx_runtime.jsx)(DropdownMenu.Separator, {}),
      (0, import_jsx_runtime.jsxs)(
        DropdownMenu.RadioGroup,
        {
          value: state.dir,
          onValueChange: handleDirChange,
          children: [
            (0, import_jsx_runtime.jsxs)(
              DropdownMenu.RadioItem,
              {
                className: "flex items-center justify-between",
                value: "asc",
                onSelect: (event) => event.preventDefault(),
                children: [
                  t("general.ascending"),
                  (0, import_jsx_runtime.jsx)(DropdownMenu.Label, { children: "1 - 30" })
                ]
              }
            ),
            (0, import_jsx_runtime.jsxs)(
              DropdownMenu.RadioItem,
              {
                className: "flex items-center justify-between",
                value: "desc",
                onSelect: (event) => event.preventDefault(),
                children: [
                  t("general.descending"),
                  (0, import_jsx_runtime.jsx)(DropdownMenu.Label, { children: "30 - 1" })
                ]
              }
            )
          ]
        }
      )
    ] })
  ] });
};

export {
  DataTableOrderBy
};
//# sourceMappingURL=chunk-CEIAMOT7.js.map
