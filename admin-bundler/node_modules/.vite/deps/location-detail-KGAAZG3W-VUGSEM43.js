import {
  isOptionEnabledInStore,
  isReturnOption
} from "./chunk-UV4UPK5W.js";
import "./chunk-6RW6WFUL.js";
import {
  ListSummary
} from "./chunk-NCOYYW2M.js";
import {
  formatProvider
} from "./chunk-6EUK4TFP.js";
import {
  LinkButton
} from "./chunk-S53VDUNM.js";
import {
  getFormattedAddress
} from "./chunk-WZM26QGA.js";
import {
  JsonViewSection
} from "./chunk-GV2TOR46.js";
import {
  NoRecords
} from "./chunk-EYAVSJ2J.js";
import {
  Divider
} from "./chunk-LRCLMHMB.js";
import "./chunk-E26TGYVV.js";
import "./chunk-BCDFWL4W.js";
import "./chunk-VOJT3GRC.js";
import "./chunk-4I3TSILH.js";
import "./chunk-P5R3EHIV.js";
import "./chunk-2TBOMIQA.js";
import "./chunk-7VADNSL7.js";
import {
  useDeleteFulfillmentServiceZone,
  useDeleteFulfillmentSet
} from "./chunk-AJ3DXG4K.js";
import "./chunk-FYV5O3WI.js";
import "./chunk-ENW5Z6NU.js";
import "./chunk-MKU523AN.js";
import "./chunk-EFAG6P6Z.js";
import "./chunk-NJ7HRVAN.js";
import "./chunk-KNWZIBC3.js";
import "./chunk-5RUNMRCW.js";
import "./chunk-CFFZHLR2.js";
import {
  useDeleteShippingOption
} from "./chunk-YEEFU7KP.js";
import "./chunk-6MTGJSDM.js";
import "./chunk-Z34GYBFG.js";
import {
  stockLocationsQueryKeys,
  useCreateStockLocationFulfillmentSet,
  useDeleteStockLocation,
  useFulfillmentProviders,
  useStockLocation
} from "./chunk-VN2HND4I.js";
import "./chunk-ACJP53PC.js";
import "./chunk-3AX2W3RD.js";
import "./chunk-ICPBA7GK.js";
import "./chunk-FREJU5EQ.js";
import "./chunk-4UBJQZN6.js";
import "./chunk-QSXBBOKN.js";
import {
  countries
} from "./chunk-PCCLBZD7.js";
import {
  ActionMenu
} from "./chunk-IE22HJTV.js";
import {
  useSalesChannels
} from "./chunk-ABZDCU5X.js";
import "./chunk-3VJMO5NN.js";
import "./chunk-IH74SCJ5.js";
import {
  queryClient
} from "./chunk-4UMAAWOP.js";
import "./chunk-Y5OEN2X7.js";
import {
  IconAvatar
} from "./chunk-PBA2TK6U.js";
import "./chunk-2ZDF4QRQ.js";
import {
  sdk
} from "./chunk-ZSXFNTF6.js";
import {
  ArchiveBox,
  Badge,
  Channels,
  Container,
  CurrencyDollar,
  HandTruck,
  Heading,
  IconButton,
  Map,
  PencilSquare,
  Plus,
  StatusBadge,
  Text,
  Trash,
  TriangleDownMini,
  toast,
  usePrompt,
  useTranslation
} from "./chunk-ZUPX4YFG.js";
import {
  Outlet,
  redirect,
  useLoaderData,
  useNavigate,
  useParams
} from "./chunk-HTGWU6KF.js";
import "./chunk-64MXM5QD.js";
import "./chunk-3VI6QF3M.js";
import {
  require_jsx_runtime
} from "./chunk-P6CFP5BP.js";
import {
  __toESM,
  require_react
} from "./chunk-H5NG3XTT.js";

// node_modules/@medusajs/dashboard/dist/location-detail-KGAAZG3W.mjs
var import_react = __toESM(require_react(), 1);
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);
import after from "virtual:medusa/widgets/location/details/after";
import before from "virtual:medusa/widgets/location/details/before";
import sideAfter from "virtual:medusa/widgets/location/details/side/after";
import sideBefore from "virtual:medusa/widgets/location/details/side/before";
var import_jsx_runtime3 = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime4 = __toESM(require_jsx_runtime(), 1);
var detailsFields = "name,*sales_channels,*address,fulfillment_sets.type,fulfillment_sets.name,*fulfillment_sets.service_zones.geo_zones,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.rules,*fulfillment_sets.service_zones.shipping_options.shipping_profile,*fulfillment_providers";
var locationQuery = (id) => ({
  queryKey: stockLocationsQueryKeys.detail(id, {
    fields: detailsFields
  }),
  queryFn: async () => {
    return await sdk.admin.stockLocation.retrieve(id, {
      fields: detailsFields
    }).catch((error) => {
      if (error.status === 401) {
        throw redirect("/login");
      }
      throw error;
    });
  }
});
var locationLoader = async ({ params }) => {
  const id = params.location_id;
  const query = locationQuery(id);
  return queryClient.getQueryData(
    query.queryKey
  ) ?? await queryClient.fetchQuery(query);
};
var LocationGeneralSection = ({
  location
}) => {
  var _a, _b;
  return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [
    (0, import_jsx_runtime.jsx)(Container, { className: "p-0", children: (0, import_jsx_runtime.jsxs)("div", { className: "flex items-center justify-between px-6 py-4", children: [
      (0, import_jsx_runtime.jsxs)("div", { children: [
        (0, import_jsx_runtime.jsx)(Heading, { children: location.name }),
        (0, import_jsx_runtime.jsx)(Text, { className: "text-ui-fg-subtle txt-small", children: getFormattedAddress({ address: location.address }).join(", ") })
      ] }),
      (0, import_jsx_runtime.jsx)(Actions, { location })
    ] }) }),
    (0, import_jsx_runtime.jsx)(
      FulfillmentSet,
      {
        locationId: location.id,
        locationName: location.name,
        type: "pickup",
        fulfillmentSet: (_a = location.fulfillment_sets) == null ? void 0 : _a.find(
          (f) => f.type === "pickup"
        )
      }
    ),
    (0, import_jsx_runtime.jsx)(
      FulfillmentSet,
      {
        locationId: location.id,
        locationName: location.name,
        type: "shipping",
        fulfillmentSet: (_b = location.fulfillment_sets) == null ? void 0 : _b.find(
          (f) => f.type === "shipping"
        )
      }
    )
  ] });
};
function ShippingOption({
  option,
  fulfillmentSetId,
  locationId
}) {
  const prompt = usePrompt();
  const { t } = useTranslation();
  const isStoreOption = isOptionEnabledInStore(option);
  const { mutateAsync } = useDeleteShippingOption(option.id);
  const handleDelete = async () => {
    const res = await prompt({
      title: t("general.areYouSure"),
      description: t("stockLocations.shippingOptions.delete.confirmation", {
        name: option.name
      }),
      verificationInstruction: t("general.typeToConfirm"),
      verificationText: option.name,
      confirmText: t("actions.delete"),
      cancelText: t("actions.cancel")
    });
    if (!res) {
      return;
    }
    await mutateAsync(void 0, {
      onSuccess: () => {
        toast.success(
          t("stockLocations.shippingOptions.delete.successToast", {
            name: option.name
          })
        );
      },
      onError: (e) => {
        toast.error(e.message);
      }
    });
  };
  return (0, import_jsx_runtime.jsxs)("div", { className: "flex items-center justify-between px-3 py-2", children: [
    (0, import_jsx_runtime.jsx)("div", { className: "flex-1", children: (0, import_jsx_runtime.jsxs)(Text, { size: "small", weight: "plus", children: [
      option.name,
      " - ",
      option.shipping_profile.name,
      " (",
      formatProvider(option.provider_id),
      ")"
    ] }) }),
    (0, import_jsx_runtime.jsx)(
      Badge,
      {
        className: "mr-4",
        color: isStoreOption ? "grey" : "purple",
        size: "2xsmall",
        rounded: "full",
        children: isStoreOption ? t("general.store") : t("general.admin")
      }
    ),
    (0, import_jsx_runtime.jsx)(
      ActionMenu,
      {
        groups: [
          {
            actions: [
              {
                icon: (0, import_jsx_runtime.jsx)(PencilSquare, {}),
                label: t("stockLocations.shippingOptions.edit.action"),
                to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${option.service_zone_id}/shipping-option/${option.id}/edit`
              },
              {
                label: t("stockLocations.shippingOptions.pricing.action"),
                icon: (0, import_jsx_runtime.jsx)(CurrencyDollar, {}),
                to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${option.service_zone_id}/shipping-option/${option.id}/pricing`
              }
            ]
          },
          {
            actions: [
              {
                label: t("actions.delete"),
                icon: (0, import_jsx_runtime.jsx)(Trash, {}),
                onClick: handleDelete
              }
            ]
          }
        ]
      }
    )
  ] });
}
function ServiceZoneOptions({
  zone,
  locationId,
  fulfillmentSetId
}) {
  const { t } = useTranslation();
  const shippingOptions = zone.shipping_options.filter(
    (o) => !isReturnOption(o)
  );
  const returnOptions = zone.shipping_options.filter((o) => isReturnOption(o));
  return (0, import_jsx_runtime.jsxs)("div", { children: [
    (0, import_jsx_runtime.jsx)(Divider, { variant: "dashed" }),
    (0, import_jsx_runtime.jsxs)("div", { className: "flex flex-col gap-y-4 px-6 py-4", children: [
      (0, import_jsx_runtime.jsxs)("div", { className: "item-center flex justify-between", children: [
        (0, import_jsx_runtime.jsx)("span", { className: "text-ui-fg-subtle txt-small self-center font-medium", children: t("stockLocations.shippingOptions.create.shipping.label") }),
        (0, import_jsx_runtime.jsx)(
          LinkButton,
          {
            to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${zone.id}/shipping-option/create`,
            children: t("stockLocations.shippingOptions.create.action")
          }
        )
      ] }),
      !!shippingOptions.length && (0, import_jsx_runtime.jsx)("div", { className: "shadow-elevation-card-rest bg-ui-bg-subtle grid divide-y rounded-md", children: shippingOptions.map((o) => (0, import_jsx_runtime.jsx)(
        ShippingOption,
        {
          option: o,
          locationId,
          fulfillmentSetId
        },
        o.id
      )) })
    ] }),
    (0, import_jsx_runtime.jsx)(Divider, { variant: "dashed" }),
    (0, import_jsx_runtime.jsxs)("div", { className: "flex flex-col gap-y-4 px-6 py-4", children: [
      (0, import_jsx_runtime.jsxs)("div", { className: "item-center flex justify-between", children: [
        (0, import_jsx_runtime.jsx)("span", { className: "text-ui-fg-subtle txt-small self-center font-medium", children: t("stockLocations.shippingOptions.create.returns.label") }),
        (0, import_jsx_runtime.jsx)(
          LinkButton,
          {
            to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${zone.id}/shipping-option/create?is_return`,
            children: t("stockLocations.shippingOptions.create.action")
          }
        )
      ] }),
      !!returnOptions.length && (0, import_jsx_runtime.jsx)("div", { className: "shadow-elevation-card-rest bg-ui-bg-subtle grid divide-y rounded-md", children: returnOptions.map((o) => (0, import_jsx_runtime.jsx)(
        ShippingOption,
        {
          option: o,
          locationId,
          fulfillmentSetId
        },
        o.id
      )) })
    ] })
  ] });
}
function ServiceZone({ zone, locationId, fulfillmentSetId }) {
  const { t } = useTranslation();
  const prompt = usePrompt();
  const [open, setOpen] = (0, import_react.useState)(true);
  const { mutateAsync: deleteZone } = useDeleteFulfillmentServiceZone(
    fulfillmentSetId,
    zone.id
  );
  const handleDelete = async () => {
    const res = await prompt({
      title: t("general.areYouSure"),
      description: t("stockLocations.serviceZones.delete.confirmation", {
        name: zone.name
      }),
      confirmText: t("actions.delete"),
      cancelText: t("actions.cancel")
    });
    if (!res) {
      return;
    }
    await deleteZone(void 0, {
      onError: (e) => {
        toast.error(e.message);
      },
      onSuccess: () => {
        toast.success(
          t("stockLocations.serviceZones.delete.successToast", {
            name: zone.name
          })
        );
      }
    });
  };
  const countries2 = (0, import_react.useMemo)(() => {
    const countryGeoZones = zone.geo_zones.filter((g) => g.type === "country");
    const countries3 = countryGeoZones.map(
      ({ country_code }) => countries.find((c) => c.iso_2 === country_code)
    ).filter((c) => !!c);
    if (countryGeoZones.length !== countries3.length) {
      console.warn(
        "Some countries are missing in the static countries list",
        countryGeoZones.filter((g) => !countries3.find((c) => c.iso_2 === g.country_code)).map((g) => g.country_code)
      );
    }
    return countries3.sort((c1, c2) => c1.name.localeCompare(c2.name));
  }, [zone.geo_zones]);
  const [shippingOptionsCount, returnOptionsCount] = (0, import_react.useMemo)(() => {
    const options = zone.shipping_options;
    const optionsCount = options.filter((o) => !isReturnOption(o)).length;
    const returnOptionsCount2 = options.filter(isReturnOption).length;
    return [optionsCount, returnOptionsCount2];
  }, [zone.shipping_options]);
  return (0, import_jsx_runtime.jsxs)("div", { className: "flex flex-col", children: [
    (0, import_jsx_runtime.jsxs)("div", { className: "flex flex-row items-center justify-between gap-x-4 px-6 py-4", children: [
      (0, import_jsx_runtime.jsx)(IconAvatar, { children: (0, import_jsx_runtime.jsx)(Map, {}) }),
      (0, import_jsx_runtime.jsxs)("div", { className: "grow-1 flex flex-1 flex-col", children: [
        (0, import_jsx_runtime.jsx)(Text, { size: "small", leading: "compact", weight: "plus", children: zone.name }),
        (0, import_jsx_runtime.jsxs)("div", { className: "flex items-center gap-2", children: [
          (0, import_jsx_runtime.jsx)(
            ListSummary,
            {
              variant: "base",
              list: countries2.map((c) => c.display_name),
              inline: true,
              n: 1
            }
          ),
          (0, import_jsx_runtime.jsx)("span", { children: "·" }),
          (0, import_jsx_runtime.jsx)(Text, { className: "text-ui-fg-subtle txt-small", children: t("stockLocations.shippingOptions.fields.count.shipping", {
            count: shippingOptionsCount
          }) }),
          (0, import_jsx_runtime.jsx)("span", { children: "·" }),
          (0, import_jsx_runtime.jsx)(Text, { className: "text-ui-fg-subtle txt-small", children: t("stockLocations.shippingOptions.fields.count.returns", {
            count: returnOptionsCount
          }) })
        ] })
      ] }),
      (0, import_jsx_runtime.jsxs)("div", { className: "flex grow-0 items-center gap-4", children: [
        (0, import_jsx_runtime.jsx)(
          IconButton,
          {
            size: "small",
            onClick: () => setOpen((s) => !s),
            variant: "transparent",
            children: (0, import_jsx_runtime.jsx)(
              TriangleDownMini,
              {
                style: {
                  transform: `rotate(${!open ? 0 : 180}deg)`,
                  transition: ".2s transform ease-in-out"
                }
              }
            )
          }
        ),
        (0, import_jsx_runtime.jsx)(
          ActionMenu,
          {
            groups: [
              {
                actions: [
                  {
                    label: t("actions.edit"),
                    icon: (0, import_jsx_runtime.jsx)(PencilSquare, {}),
                    to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${zone.id}/edit`
                  },
                  {
                    label: t("stockLocations.serviceZones.manageAreas.action"),
                    icon: (0, import_jsx_runtime.jsx)(Map, {}),
                    to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSetId}/service-zone/${zone.id}/areas`
                  }
                ]
              },
              {
                actions: [
                  {
                    label: t("actions.delete"),
                    icon: (0, import_jsx_runtime.jsx)(Trash, {}),
                    onClick: handleDelete
                  }
                ]
              }
            ]
          }
        )
      ] })
    ] }),
    open && (0, import_jsx_runtime.jsx)(
      ServiceZoneOptions,
      {
        fulfillmentSetId,
        locationId,
        zone
      }
    )
  ] });
}
function FulfillmentSet(props) {
  const { t } = useTranslation();
  const prompt = usePrompt();
  const { fulfillmentSet, locationName, locationId, type } = props;
  const fulfillmentSetExists = !!fulfillmentSet;
  const hasServiceZones = !!(fulfillmentSet == null ? void 0 : fulfillmentSet.service_zones.length);
  const { mutateAsync: createFulfillmentSet } = useCreateStockLocationFulfillmentSet(locationId);
  const { mutateAsync: deleteFulfillmentSet } = useDeleteFulfillmentSet(
    fulfillmentSet == null ? void 0 : fulfillmentSet.id
  );
  const handleCreate = async () => {
    await createFulfillmentSet(
      {
        name: `${locationName} ${type === "pickup" ? "pick up" : type}`,
        type
      },
      {
        onSuccess: () => {
          toast.success(t(`stockLocations.fulfillmentSets.enable.${type}`));
        },
        onError: (e) => {
          toast.error(e.message);
        }
      }
    );
  };
  const handleDelete = async () => {
    const res = await prompt({
      title: t("general.areYouSure"),
      description: t(`stockLocations.fulfillmentSets.disable.confirmation`, {
        name: fulfillmentSet == null ? void 0 : fulfillmentSet.name
      }),
      confirmText: t("actions.disable"),
      cancelText: t("actions.cancel")
    });
    if (!res) {
      return;
    }
    await deleteFulfillmentSet(void 0, {
      onSuccess: () => {
        toast.success(t(`stockLocations.fulfillmentSets.disable.${type}`));
      },
      onError: (e) => {
        toast.error(e.message);
      }
    });
  };
  const groups = fulfillmentSet ? [
    {
      actions: [
        {
          icon: (0, import_jsx_runtime.jsx)(Plus, {}),
          label: t("stockLocations.serviceZones.create.action"),
          to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSet.id}/service-zones/create`
        }
      ]
    },
    {
      actions: [
        {
          icon: (0, import_jsx_runtime.jsx)(Trash, {}),
          label: t("actions.disable"),
          onClick: handleDelete
        }
      ]
    }
  ] : [
    {
      actions: [
        {
          icon: (0, import_jsx_runtime.jsx)(Plus, {}),
          label: t("actions.enable"),
          onClick: handleCreate
        }
      ]
    }
  ];
  return (0, import_jsx_runtime.jsx)(Container, { className: "p-0", children: (0, import_jsx_runtime.jsxs)("div", { className: "flex flex-col divide-y", children: [
    (0, import_jsx_runtime.jsxs)("div", { className: "flex items-center justify-between px-6 py-4", children: [
      (0, import_jsx_runtime.jsx)(Heading, { level: "h2", children: t(`stockLocations.fulfillmentSets.${type}.header`) }),
      (0, import_jsx_runtime.jsxs)("div", { className: "flex items-center gap-4", children: [
        (0, import_jsx_runtime.jsx)(StatusBadge, { color: fulfillmentSetExists ? "green" : "grey", children: t(
          fulfillmentSetExists ? "statuses.enabled" : "statuses.disabled"
        ) }),
        (0, import_jsx_runtime.jsx)(ActionMenu, { groups })
      ] })
    ] }),
    fulfillmentSetExists && !hasServiceZones && (0, import_jsx_runtime.jsx)("div", { className: "flex items-center justify-center py-8 pt-6", children: (0, import_jsx_runtime.jsx)(
      NoRecords,
      {
        message: t("stockLocations.serviceZones.fields.noRecords"),
        className: "h-fit",
        action: {
          to: `/settings/locations/${locationId}/fulfillment-set/${fulfillmentSet.id}/service-zones/create`,
          label: t("stockLocations.serviceZones.create.action")
        }
      }
    ) }),
    hasServiceZones && (0, import_jsx_runtime.jsx)("div", { className: "flex flex-col divide-y", children: fulfillmentSet == null ? void 0 : fulfillmentSet.service_zones.map((zone) => (0, import_jsx_runtime.jsx)(
      ServiceZone,
      {
        zone,
        locationId,
        fulfillmentSetId: fulfillmentSet.id
      },
      zone.id
    )) })
  ] }) });
}
var Actions = ({ location }) => {
  const navigate = useNavigate();
  const { t } = useTranslation();
  const { mutateAsync } = useDeleteStockLocation(location.id);
  const prompt = usePrompt();
  const handleDelete = async () => {
    const res = await prompt({
      title: t("general.areYouSure"),
      description: t("stockLocations.delete.confirmation", {
        name: location.name
      }),
      verificationText: location.name,
      verificationInstruction: t("general.typeToConfirm"),
      confirmText: t("actions.delete"),
      cancelText: t("actions.cancel")
    });
    if (!res) {
      return;
    }
    await mutateAsync(void 0, {
      onSuccess: () => {
        toast.success(
          t("stockLocations.create.successToast", {
            name: location.name
          })
        );
        navigate("/settings/locations", { replace: true });
      },
      onError: (e) => {
        toast.error(e.message);
      }
    });
  };
  return (0, import_jsx_runtime.jsx)(
    ActionMenu,
    {
      groups: [
        {
          actions: [
            {
              icon: (0, import_jsx_runtime.jsx)(PencilSquare, {}),
              label: t("actions.edit"),
              to: `edit`
            },
            {
              icon: (0, import_jsx_runtime.jsx)(ArchiveBox, {}),
              label: t("stockLocations.edit.viewInventory"),
              to: `/inventory?location_id=${location.id}`
            }
          ]
        },
        {
          actions: [
            {
              icon: (0, import_jsx_runtime.jsx)(Trash, {}),
              label: t("actions.delete"),
              onClick: handleDelete
            }
          ]
        }
      ]
    }
  );
};
function LocationsSalesChannelsSection({
  location
}) {
  var _a, _b, _c;
  const { t } = useTranslation();
  const { count } = useSalesChannels({ limit: 1, fields: "id" });
  const hasConnectedChannels = !!((_a = location.sales_channels) == null ? void 0 : _a.length);
  return (0, import_jsx_runtime2.jsxs)(Container, { className: "flex flex-col px-6 py-4", children: [
    (0, import_jsx_runtime2.jsxs)("div", { className: "flex items-center justify-between", children: [
      (0, import_jsx_runtime2.jsx)(Heading, { level: "h2", children: t("stockLocations.salesChannels.header") }),
      (0, import_jsx_runtime2.jsx)(
        ActionMenu,
        {
          groups: [
            {
              actions: [
                {
                  label: t("actions.edit"),
                  to: "sales-channels",
                  icon: (0, import_jsx_runtime2.jsx)(PencilSquare, {})
                }
              ]
            }
          ]
        }
      )
    ] }),
    hasConnectedChannels ? (0, import_jsx_runtime2.jsxs)("div", { className: "flex flex-col gap-y-4 pt-4", children: [
      (0, import_jsx_runtime2.jsxs)("div", { className: "grid grid-cols-[28px_1fr] items-center gap-x-3", children: [
        (0, import_jsx_runtime2.jsx)(IconAvatar, { children: (0, import_jsx_runtime2.jsx)(Channels, { className: "text-ui-fg-subtle" }) }),
        (0, import_jsx_runtime2.jsx)(
          ListSummary,
          {
            n: 3,
            className: "text-ui-fg-base",
            inline: true,
            list: ((_b = location.sales_channels) == null ? void 0 : _b.map((sc) => sc.name)) ?? []
          }
        )
      ] }),
      (0, import_jsx_runtime2.jsx)(Text, { className: "text-ui-fg-subtle", size: "small", leading: "compact", children: t("stockLocations.salesChannels.connectedTo", {
        count: (_c = location.sales_channels) == null ? void 0 : _c.length,
        total: count
      }) })
    ] }) : (0, import_jsx_runtime2.jsx)(
      NoRecords,
      {
        className: "h-fit pb-2 pt-6",
        action: {
          label: t("stockLocations.salesChannels.action"),
          to: "sales-channels"
        },
        message: t("stockLocations.salesChannels.noChannels")
      }
    )
  ] });
}
var locations_sales_channels_section_default = LocationsSalesChannelsSection;
function LocationsFulfillmentProvidersSection({
  location
}) {
  const { t } = useTranslation();
  const { fulfillment_providers } = useFulfillmentProviders({
    stock_location_id: location.id,
    fields: "id",
    is_enabled: true
  });
  return (0, import_jsx_runtime3.jsxs)(Container, { className: "flex flex-col px-6 py-4", children: [
    (0, import_jsx_runtime3.jsxs)("div", { className: "flex items-center justify-between", children: [
      (0, import_jsx_runtime3.jsx)(Heading, { level: "h2", children: t("stockLocations.fulfillmentProviders.header") }),
      (0, import_jsx_runtime3.jsx)(
        ActionMenu,
        {
          groups: [
            {
              actions: [
                {
                  label: t("actions.edit"),
                  to: "fulfillment-providers",
                  icon: (0, import_jsx_runtime3.jsx)(PencilSquare, {})
                }
              ]
            }
          ]
        }
      )
    ] }),
    (fulfillment_providers == null ? void 0 : fulfillment_providers.length) ? (0, import_jsx_runtime3.jsx)("div", { className: "flex flex-col gap-y-4 pt-4", children: (0, import_jsx_runtime3.jsx)("div", { className: "grid grid-cols-[28px_1fr] items-center gap-x-3 gap-y-3", children: fulfillment_providers == null ? void 0 : fulfillment_providers.map((fulfillmentProvider) => {
      return (0, import_jsx_runtime3.jsxs)(import_jsx_runtime3.Fragment, { children: [
        (0, import_jsx_runtime3.jsx)(IconAvatar, { children: (0, import_jsx_runtime3.jsx)(HandTruck, { className: "text-ui-fg-subtle" }) }),
        (0, import_jsx_runtime3.jsx)("div", { className: "txt-compact-small", children: formatProvider(fulfillmentProvider.id) })
      ] });
    }) }) }) : (0, import_jsx_runtime3.jsx)(
      NoRecords,
      {
        className: "h-fit pb-2 pt-6 text-center",
        action: {
          label: t("stockLocations.fulfillmentProviders.action"),
          to: "fulfillment-providers"
        },
        message: t("stockLocations.fulfillmentProviders.noProviders")
      }
    )
  ] });
}
var location_fulfillment_providers_section_default = LocationsFulfillmentProvidersSection;
var LocationDetail = () => {
  const initialData = useLoaderData();
  const { location_id } = useParams();
  const {
    stock_location: location,
    isPending: isLoading,
    isError,
    error
  } = useStockLocation(location_id, { fields: detailsFields }, { initialData });
  if (isLoading || !location) {
    return (0, import_jsx_runtime4.jsx)("div", { children: "Loading..." });
  }
  if (isError) {
    throw error;
  }
  return (0, import_jsx_runtime4.jsxs)("div", { className: "flex flex-col gap-y-3", children: [
    before.widgets.map((w, i) => {
      return (0, import_jsx_runtime4.jsx)("div", { children: (0, import_jsx_runtime4.jsx)(w.Component, { data: location }) }, i);
    }),
    (0, import_jsx_runtime4.jsxs)("div", { className: "flex flex-col gap-y-3 xl:flex-row xl:items-start xl:gap-x-4", children: [
      (0, import_jsx_runtime4.jsxs)("div", { className: "flex w-full flex-col gap-y-3", children: [
        (0, import_jsx_runtime4.jsx)(LocationGeneralSection, { location }),
        after.widgets.map((w, i) => {
          return (0, import_jsx_runtime4.jsx)("div", { children: (0, import_jsx_runtime4.jsx)(w.Component, { data: location }) }, i);
        }),
        (0, import_jsx_runtime4.jsx)("div", { className: "hidden xl:block", children: (0, import_jsx_runtime4.jsx)(JsonViewSection, { data: location }) })
      ] }),
      (0, import_jsx_runtime4.jsxs)("div", { className: "flex w-full max-w-[100%] flex-col gap-y-3 xl:mt-0 xl:max-w-[400px]", children: [
        sideBefore.widgets.map((w, i) => {
          return (0, import_jsx_runtime4.jsx)("div", { children: (0, import_jsx_runtime4.jsx)(w.Component, { data: location }) }, i);
        }),
        (0, import_jsx_runtime4.jsx)(locations_sales_channels_section_default, { location }),
        (0, import_jsx_runtime4.jsx)(location_fulfillment_providers_section_default, { location }),
        sideAfter.widgets.map((w, i) => {
          return (0, import_jsx_runtime4.jsx)("div", { children: (0, import_jsx_runtime4.jsx)(w.Component, { data: location }) }, i);
        }),
        (0, import_jsx_runtime4.jsx)("div", { className: "xl:hidden", children: (0, import_jsx_runtime4.jsx)(JsonViewSection, { data: location }) })
      ] }),
      (0, import_jsx_runtime4.jsx)(Outlet, {})
    ] })
  ] });
};
export {
  LocationDetail as Component,
  locationLoader as loader
};
//# sourceMappingURL=location-detail-KGAAZG3W-VUGSEM43.js.map
